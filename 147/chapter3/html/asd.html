<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html<!DOCTYPE html>
        <!-- saved from url=(0054)https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>⚡ 羽飞门</title><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><link rel="mask-icon" color="#3D4B67" href="https://dev.fayfans.com/res/phabricator/e132a80f/rsrc/favicons/mask-icon.svg"><link rel="apple-touch-icon" href="https://dev.fayfans.com/res/phabricator/2d061a11/rsrc/favicons/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="120x120" href="https://dev.fayfans.com/res/phabricator/0d1543c7/rsrc/favicons/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="152x152" href="https://dev.fayfans.com/res/phabricator/65905ecd/rsrc/favicons/apple-touch-icon-152x152.png"><link href="https://dev.fayfans.com/res/phabricator/cdb11121/rsrc/favicons/favicon.ico" id="favicon" rel="shortcut icon"><meta name="referrer" content="never"><script type="text/javascript">(top == self) || top.location.replace(self.location.href);window.__DEV__=0;</script><link rel="stylesheet" type="text/css" href="./⚡ 羽飞门_files/phriction-document-css.css"><link rel="stylesheet" type="text/css" href="./⚡ 羽飞门_files/core.pkg.css"><link rel="stylesheet" type="text/css" href="./⚡ 羽飞门_files/phui-document.css"><link rel="stylesheet" type="text/css" href="./⚡ 羽飞门_files/phui-document-pro.css"><link rel="stylesheet" type="text/css" href="./⚡ 羽飞门_files/conpherence.pkg.css"><script type="text/javascript" src="./⚡ 羽飞门_files/init.js.下载"></script></head><body class="device-desktop platform-windows phui-theme-blindigo" id=""><div class="main-page-frame" id="main-page-frame" data-autoid="autoid_1"><div id="phabricator-standard-page" class="phabricator-standard-page"><div class="phabricator-main-menu phabricator-main-menu-background" id="UQ0_18"><a class=" phabricator-core-user-menu phabricator-core-user-mobile-menu" href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" data-sigil="phui-dropdown-menu" data-meta="0_17"><span class="visual-only phui-icon-view phui-font-fa fa-bars" data-meta="0_18" aria-hidden="true"></span><span class="caret"></span></a><a class="phabricator-main-menu-search-button phabricator-expand-application-menu" data-sigil="jx-toggle-class" data-meta="0_16"><span class="phabricator-menu-button-icon phui-icon-view phui-font-fa fa-search" id="UQ0_41"></span></a><a class="phabricator-main-menu-brand" href="https://dev.fayfans.com/"><span class="aural-only">Home</span><span class="phabricator-main-menu-eye" style=""></span><span class="phabricator-wordmark">Phabricator</span></a><div class="visual-only phabricator-main-menu-alerts" aria-hidden="true"><a href="https://dev.fayfans.com/notification/" class="alert-notifications" id="UQ0_24" data-autoid="autoid_3"><span class="phabricator-main-menu-alert-icon phui-icon-view phui-font-fa fa-bell" data-sigil="menu-icon"></span><span id="UQ0_22" class="phabricator-main-menu-alert-count">0</span></a><a href="https://dev.fayfans.com/conpherence/" class="alert-notifications" id="UQ0_19" data-autoid="autoid_2"><span class="phabricator-main-menu-message-icon phui-icon-view phui-font-fa fa-comments" data-sigil="menu-icon"></span><span id="UQ0_20" class="phabricator-main-menu-message-count">0</span></a></div><span class="aural-only">No messages. No notifications.</span><ul class="phui-list-view phabricator-search-menu"><li class="phui-list-item-view phui-list-item-type-link phabricator-main-menu-search"><div class=""><form action="https://dev.fayfans.com/search/" method="POST"><input type="hidden" name="__csrf__" value="B@mhxosjhx8e32856170663a5b"><input type="hidden" name="__form__" value="1"><div class="phabricator-main-menu-search-container"><input type="text" name="query" id="UQ0_42" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-autoid="autoid_7" class=" jx-typeahead-placeholder"><button id="UQ0_73" class="phui-icon-view phui-font-fa fa-search" data-autoid="autoid_9"></button><button class="button dropdown has-icon phui-button-default phabricator-main-menu-search-dropdown" id="UQ0_74" data-sigil="global-search-dropdown" data-meta="0_19"><span class="visual-only phui-icon-view phui-font-fa fa-globe" data-sigil="global-search-dropdown-icon" data-meta="0_20" aria-hidden="true"></span><span class="caret"></span></button><input type="hidden" name="search:scope" value="all" data-sigil="global-search-dropdown-input"><input type="hidden" id="UQ0_75" name="search:application" value="PhabricatorPhrictionApplication" data-sigil="global-search-dropdown-app"><span class="aural-only">Search</span><input type="hidden" name="search:primary" value="true"><div id="UQ0_72" class="phabricator-main-menu-search-target"></div></div></form></div></li></ul><div id="UQ0_23" class="phabricator-notification-menu" style="display: none;" data-sigil="phabricator-notification-menu"></div><div id="UQ0_21" class="phabricator-notification-menu" style="display: none;" data-sigil="phabricator-notification-menu"></div><a class="phabricator-core-user-menu" href="https://dev.fayfans.com/p/xingjin/" id="UQ0_53" data-autoid="autoid_5" aria-expanded="false"><span style="background-image: url(https://dev.fayfans.com/file/data/gk7aafimjs7dky3vzczn/PHID-FILE-oxyzbll3okylpwll5gfv/profile);" class="visual-only phui-icon-view phuihead-small" data-meta="0_21" aria-hidden="true"></span><span class="caret"></span></a><a class=" phabricator-core-user-menu" href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" data-sigil="phui-dropdown-menu" data-meta="0_22"><span class="visual-only phui-icon-view phui-font-fa fa-star" data-meta="0_23" aria-hidden="true"></span><span class="caret"></span></a></div><div id="phabricator-standard-page-body" class="phabricator-standard-page-body"><div class="phui-crumbs-view phui-crumbs-border"><div class="phui-crumbs-actions"><a href="https://dev.fayfans.com/phriction/" class="phui-crumbs-action" data-sigil=""><span class="visual-only phui-icon-view phui-font-fa fa-home" data-meta="0_24" aria-hidden="true"></span><span class="phui-crumbs-action-name">Index</span></a><a href="https://dev.fayfans.com/phriction/new/?slug=%E7%BE%BD%E9%A3%9E%E9%97%A8/" class="phui-crumbs-action" data-sigil="workflow"><span class="visual-only phui-icon-view phui-font-fa fa-plus-square" data-meta="0_25" aria-hidden="true"></span><span class="phui-crumbs-action-name">New Document</span></a></div><a href="https://dev.fayfans.com/w/" class="phui-crumb-view phui-crumb-has-icon"><span class="visual-only phui-icon-view phui-font-fa fa-book" data-meta="0_26" aria-hidden="true"></span><span class="phui-crumb-name"> Phriction</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_27" aria-hidden="true"></span><a href="https://dev.fayfans.com/w/" class="phui-crumb-view"><span class="phui-crumb-name"> 飞凡士科技</span> </a><span class="visual-only phui-icon-view phui-font-fa fa-angle-right phui-crumb-divider phui-crumb-view" data-meta="0_28" aria-hidden="true"></span><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/" class="phui-crumb-view phabricator-last-crumb"><span class="phui-crumb-name"> 羽飞门</span> </a></div><div class="phui-document-container "><div class="phui-document-view phui-document-view-pro"><div class="phui-document-content"><div class="phui-document-inner"><div class="phui-document-toc-container" id="UQ0_0"><a class="button has-icon phui-button-simple phui-document-toc" data-sigil="jx-toggle-class" data-meta="0_0"><span class="visual-only phui-icon-view phui-font-fa fa-align-left" data-meta="0_1" aria-hidden="true"></span></a><div class="phui-list-sidenav phui-document-toc-list"><div class="phui-document-toc-content"><div class="phui-document-toc-header">Contents</div><ul>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#1">项目</a></li>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#2">设备</a></li>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#3">版本号</a></li>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#4">算法</a></li>
    <ul>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#totp-1">TOTP-1</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#tlv">TLV</a></li>
    </ul>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#v1">协议v1</a></li>
    <ul>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#5">初始化</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#6">授时</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#7">序列号</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#8">更新配置</a></li>
    </ul>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#v2">协议v2</a></li>
    <ul>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#9">静态二维码序号</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#10">设置控制器序号（两字节）</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#11">错误二维码</a></li>
    </ul>
    <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#v3">协议v3</a></li>
    <ul>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#fifo">读头内部（FIFO）</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#v3s-51">读头内部 v3s 与 51 之间</a></li>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#rs485">读头、控制器间（RS485）</a></li>
        <ul>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#12">授时</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#13">取时间</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#14">开门请求</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#15">开门通知（仅开关）</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#16">切换到常开模式</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#17">切换到普通模式</a></li>
        </ul>
        <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#18">网络部分</a></li>
        <ul>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#19">发现</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#20">心跳+授时</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#21">增加白名单</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#22">删除白名单</a></li>
            <li><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#23">刷卡记录</a></li>
        </ul>
    </ul>
</ul></div></div></div><div class="phui-header-shell phui-header-tall "><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">羽飞门</span><div class="phui-header-subheader"><span class="phui-tag-view phui-tag-type-shade phui-tag-shade phui-tag-icon-view "><span class="phui-tag-core "><span class="visual-only phui-icon-view phui-font-fa fa-clock-o bluegrey" data-meta="0_14" aria-hidden="true"></span>Updated 7 Days Ago</span></span><span class="policy-header-callout"><span class="visual-only phui-icon-view phui-font-fa fa-users bluegrey" data-meta="0_13" aria-hidden="true"></span><a class="policy-link" href="https://dev.fayfans.com/policy/explain/PHID-WIKI-4tzhvvxyrx2kcsyzskkj/view/" data-sigil="workflow">All Users</a></span></div></div><div class="phui-header-col3"><div class="phui-header-action-links"><a class="button button-grey dropdown has-icon has-text phui-button-default phui-mobile-menu msl phui-header-action-link" href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" data-sigil="phui-dropdown-menu" data-meta="0_10" data-autoid="autoid_15" aria-expanded="false"><span class="visual-only phui-icon-view phui-font-fa fa-bars" data-meta="0_11" aria-hidden="true"></span><div class="phui-button-text">Actions</div><span class="caret"></span></a></div></div></div></h1></div><div class="phabricator-remarkup"><h2 class="remarkup-header"><a name="1"></a>项目</h2>

    <ul class="remarkup-list">
        <li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/%E9%80%9A%E6%83%A0%E6%B2%B3/" class="phriction-link">通惠河</a></li>
        <li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/%E5%8F%8C%E5%88%9B%E8%A1%97/" class="phriction-link">双创街</a></li>
        <li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/ideapod/" class="phriction-link">ideaPod</a></li>
    </ul>

    <h2 class="remarkup-header"><a name="2"></a>设备</h2>

    <p>连接方式：RS-485</p>

    <h2 class="remarkup-header"><a name="3"></a>版本号</h2>

    <p>读头</p>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>版本号</td><td>说明</td></tr>
        <tr><td><tt class="remarkup-monospaced">00</tt></td><td>条码1.0 + City Union目录结构 + 私有门禁密钥</td></tr>
        <tr><td><tt class="remarkup-monospaced">01</tt></td><td>条码2.0 + City Union目录结构 + 私有门禁密钥</td></tr>
        <tr></tr>
        </tbody></table></div>

    <p>条码</p>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>版本号</td><td>说明</td></tr>
        <tr><td>1.0</td><td>0XXXXXXXYYYYYY，XXXXXXX为7位白名单序列号，YYYYYY为自定义TOTP校验码，算法见TOTP-1</td></tr>
        <tr><td>2.0</td><td>1开头，在1.0的基础上增加静态二维码，见TLV</td></tr>
        <tr></tr>
        </tbody></table></div>



    <h2 class="remarkup-header"><a name="4"></a>算法</h2>

    <h3 class="remarkup-header"><a name="totp-1"></a>TOTP-1</h3>

    <p>使用私有16字节密钥 <tt class="remarkup-monospaced">MDK</tt>。</p>

    <div class="remarkup-code-block" data-code-lang="text" data-sigil="remarkup-code-block"><pre class="remarkup-code">条码数值：00000198656616，在2016年12月31日10:00:00附近扫描有效
1. 计算TOTP密钥：
DDK = 3DES(MDK, SN) 连接 3DES(MDK, ~SN)，SN前需要补9位0，SN = 0000000000000198，MDK = 829A5DAA67C0DFFA674822B7F41F153A，则 DDK = 46F8B77525E8C07BFBF614C7BF2B2565
2. 计算可能的TOTP：
假设当前时间为2016年12月31日10:00:00，则对应的timestamp为T = 1483149600（以UTC 1970-1-1 0:0:0为起点）。
TC = floor(T / 30) = 49438320 = 0x02F25E70（4字节）
枚举TC' = TC-2, TC-1, TC, TC+1, TC+2，分别计算（下面以TC为例）：
HMAC-SHA256(DDK, TC) = 0af260a8a5cb4f57c3901448b5c9c932dd8059867a9d034c9e235757923e0728
取高4字节0x0af260a8 = 183656616，模10^6得到656616
3. 依次判断ZZZZZZ是否为TC'对应的这个值，例如取TC时，判断是否为656616</pre></div>



    <h3 class="remarkup-header"><a name="tlv"></a>TLV</h3>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>Tag</td><td>说明</td></tr>
        <tr><td>00</td><td>TLV条码版本号，目前使用00</td></tr>
        <tr><td>01</td><td>长度为2字节的门禁序号列表</td></tr>
        <tr><td>02</td><td>用户ID</td></tr>
        <tr><td>03</td><td>valid</td></tr>
        <tr><td>04</td><td>expire</td></tr>
        <tr><td>05</td><td>Signature</td></tr>
        <tr></tr>
        </tbody></table></div>

    <p>Signature计算方法：HMAC-SHA256(其他部分, key)取前四字节</p>

    <p>整体数据使用BASE64编码</p>

    <p>示例：<br>
        用户ID = 123456可以打开1、2号门，生效时间1508984816，过期时间1509984816，key：49B9F75E467C3EF115D915CDF8C858EC，<br>
        则数据（HEX）为<tt class="remarkup-monospaced">00010001040001000202040001E240030459F147F004045A008A300504E83CC78A</tt>，对应的BASE64为：<tt class="remarkup-monospaced">AAEAAQQAAQACAgQAAeJAAwRZ8UfwBARaAIowBQToPMeK</tt>，前方加1为二维码数据：<tt class="remarkup-monospaced">1AAEAAQQAAQACAgQAAeJAAwRZ8UfwBARaAIowBQToPMeK</tt></p>

    <h2 class="remarkup-header"><a name="v1"></a>协议v1</h2>

    <h3 class="remarkup-header"><a name="5"></a>初始化</h3>

    <p>控制器：<tt class="remarkup-monospaced">00</tt><br>
        读头：<tt class="remarkup-monospaced">00</tt> + 版本号，出错返回<tt class="remarkup-monospaced">00FF</tt></p>

    <h3 class="remarkup-header"><a name="6"></a>授时</h3>

    <p>控制器：<tt class="remarkup-monospaced">01</tt> + 四字节timestamp<br>
        读头：<tt class="remarkup-monospaced">01</tt></p>

    <h3 class="remarkup-header"><a name="7"></a>序列号</h3>

    <p>读头：<tt class="remarkup-monospaced">02</tt><br>
        控制器：<tt class="remarkup-monospaced">02</tt> + 四字节随机数<br>
        读头：<tt class="remarkup-monospaced">03</tt> + 四字节卡序号 + 校验和（HMAC-SHA256(TK, 卡序号 XOR 随机数)）<br>
        控制器：<tt class="remarkup-monospaced">0300</tt>（成功）、<tt class="remarkup-monospaced">03FF</tt>（失败）</p>

    <h3 class="remarkup-header"><a name="8"></a>更新配置</h3>

    <p>读头：<tt class="remarkup-monospaced">04</tt> + ID（4字节，网络序）+ 服务器IP + 端口（2字节，网络序）+<tt class="remarkup-monospaced">00</tt>（DHCP）<br>
        或读头：<tt class="remarkup-monospaced">04</tt> + ID（4字节，网络序）+ 服务器IP + 端口（2字节，网络序）+ <tt class="remarkup-monospaced">01</tt> + 本机IP + 网关 + 掩码<br>
        控制器：<tt class="remarkup-monospaced">04</tt></p>

    <h2 class="remarkup-header"><a name="v2"></a>协议v2</h2>

    <h3 class="remarkup-header"><a name="9"></a>静态二维码序号</h3>

    <p>读头：<tt class="remarkup-monospaced">05</tt><br>
        控制器：<tt class="remarkup-monospaced">05</tt> + 四字节随机数<br>
        读头：<tt class="remarkup-monospaced">06</tt> + 四字节用户ID + 校验和（HMAC-SHA256(TK, 用户ID XOR 随机数)）<br>
        控制器：<tt class="remarkup-monospaced">06</tt></p>

    <h3 class="remarkup-header"><a name="10"></a>设置控制器序号（两字节）</h3>

    <p>控制器：<tt class="remarkup-monospaced">07</tt>+序号<br>
        读头：<tt class="remarkup-monospaced">07</tt></p>

    <h3 class="remarkup-header"><a name="11"></a>错误二维码</h3>

    <p>读头：<tt class="remarkup-monospaced">08</tt> + 四字节用户ID + 错误码<br>
        控制器：<tt class="remarkup-monospaced">08</tt></p>

    <h2 class="remarkup-header"><a name="v3"></a>协议v3</h2>

    <h3 class="remarkup-header"><a name="fifo"></a>读头内部（FIFO）</h3>

    <p>FIFO文件：<tt class="remarkup-monospaced">/run/yfdoor.fifo</tt><br>
        帧结构与RS485完全一致。<br>
        Payload 第一个字节为消息类型。</p>

    <p>刷卡消息 Payload 结构：</p>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>类型(1字节) 0x01</td><td>SN (uint32_t 4字节)</td></tr>
        <tr></tr>
        </tbody></table></div>

    <p>卡片无效时 SN 为0</p>

    <p>刷二维码消息 Payload 结构：</p>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>类型(1字节) 0x02</td><td>SN (uint32_t 4字节)</td></tr>
        <tr></tr>
        </tbody></table></div>

    <p>二维码无效时 SN 为0</p>

    <h3 class="remarkup-header"><a name="v3s-51"></a>读头内部 v3s 与 51 之间</h3>

    <p>串口 8位 无校验位 波特率 1000 每byte为一个显示状态 显示结束后自动转换回待机状态</p>

    <p><tt class="remarkup-monospaced">0x00</tt> 保留，没有任何作用<br>
        <tt class="remarkup-monospaced">0x01</tt> 刷卡成功<br>
        <tt class="remarkup-monospaced">0x02</tt> 刷卡失败<br>
        <tt class="remarkup-monospaced">0x03</tt> reader 启动<br>
        <tt class="remarkup-monospaced">0x04</tt> nfc启动<br>
        <tt class="remarkup-monospaced">0x05</tt> qr启动</p>

    <h3 class="remarkup-header"><a name="rs485"></a>读头、控制器间（RS485）</h3>

    <p>帧格式</p>

    <div class="remarkup-table-wrap"><table class="remarkup-table">
        <tbody><tr><td>帧起始字节(1字节) 0x7E</td><td>保留位(1字节) 0x00</td><td>Payload 长度(1字节)</td></tr>
        <tr><td>Payload 校验和(1字节)</td><td>Payload(n字节)</td><td>帧结束字节(1字节) 0x0D</td></tr>
        <tr></tr>
        </tbody></table></div>

    <p>Payload 校验和为 Payload 按字节 xor 的结果。</p>

    <h4 class="remarkup-header"><a name="12"></a>授时</h4>

    <p>读头-&gt;控制器：<tt class="remarkup-monospaced">0001xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是网络序四字节UTC时间戳</p>

    <h4 class="remarkup-header"><a name="13"></a>取时间</h4>

    <p>读头-&gt;控制器：<tt class="remarkup-monospaced">0002</tt><br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0002xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是网络序四字节UTC时间戳</p>

    <h4 class="remarkup-header"><a name="14"></a>开门请求</h4>

    <p>读头-&gt;控制器：<tt class="remarkup-monospaced">0003</tt><br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0003xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是四字节随机数<br>
        读头-&gt;控制器：<tt class="remarkup-monospaced">0004xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是使用通讯密钥对四字节随机数填充到16字节后使用AES加密的高四字节<br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0004xx</tt>，<tt class="remarkup-monospaced">xx</tt>表示结果，<tt class="remarkup-monospaced">55</tt>表示成功，<tt class="remarkup-monospaced">AA</tt>表示失败</p>

    <h4 class="remarkup-header"><a name="15"></a>开门通知（仅开关）</h4>

    <p>控制器-&gt;读头：<tt class="remarkup-monospaced">0005</tt></p>

    <h4 class="remarkup-header"><a name="16"></a>切换到常开模式</h4>

    <p>读头-&gt;控制器：<tt class="remarkup-monospaced">0006</tt><br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0006xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是八字节随机数<br>
        读头-&gt;控制器：<tt class="remarkup-monospaced">0007xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>是使用通讯密钥对四字节随机数填充到16字节后使用AES加密的高四字节<br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0007xx</tt>，<tt class="remarkup-monospaced">xx</tt>表示结果，<tt class="remarkup-monospaced">55</tt>表示成功，<tt class="remarkup-monospaced">AA</tt>表示失败</p>

    <h4 class="remarkup-header"><a name="17"></a>切换到普通模式</h4>

    <p>读头-&gt;控制器：<tt class="remarkup-monospaced">0008</tt><br>
        控制器-&gt;读头：<tt class="remarkup-monospaced">0008</tt></p>

    <h3 class="remarkup-header"><a name="18"></a>网络部分</h3>

    <p>管理端UDP端口：9988<br>
        读头UDP端口：9989</p>

    <h4 class="remarkup-header"><a name="19"></a>发现</h4>

    <p>读头广播：<tt class="remarkup-monospaced">000467ECED85</tt>（16进制的6字节）<br>
        管理端回复：<tt class="remarkup-monospaced">000467ECED85</tt>（16进制的6字节）</p>

    <h4 class="remarkup-header"><a name="20"></a>心跳+授时</h4>

    <p>读头：<tt class="remarkup-monospaced">01LLxxxx</tt>，<tt class="remarkup-monospaced">LL</tt>表示读头ID的长度，<tt class="remarkup-monospaced">xxxx</tt>表示读头ID<br>
        管理端：<tt class="remarkup-monospaced">01xxxxxxxx</tt>，<tt class="remarkup-monospaced">xxxxxxxx</tt>为unix时间戳（单位：秒）</p>

    <h4 class="remarkup-header"><a name="21"></a>增加白名单</h4>

    <p>管理端：<tt class="remarkup-monospaced">02DDDDDDDDxxxxxxxx</tt>，<tt class="remarkup-monospaced">DDDDDDDD</tt>表示记录ID，<tt class="remarkup-monospaced">xxxxxxxx</tt>表示增加的白名单序号<br>
        读头：<tt class="remarkup-monospaced">02DDDDDDDD</tt>，表示处理成功</p>

    <h4 class="remarkup-header"><a name="22"></a>删除白名单</h4>

    <p>管理端：<tt class="remarkup-monospaced">03DDDDDDDDxxxxxxxx</tt>，<tt class="remarkup-monospaced">DDDDDDDD</tt>表示记录ID，<tt class="remarkup-monospaced">xxxxxxxx</tt>表示删除的白名单序号<br>
        读头：<tt class="remarkup-monospaced">03DDDDDDDD</tt>，表示处理成功</p>

    <h4 class="remarkup-header"><a name="23"></a>刷卡记录</h4>

    <p>读头：<tt class="remarkup-monospaced">04DDDDDDDDTTTTTTTTSSLLxxxx</tt>，<tt class="remarkup-monospaced">DDDDDDDD</tt>表示白名单序号，<tt class="remarkup-monospaced">TTTTTTTT</tt>为unix时间戳（单位：秒），<tt class="remarkup-monospaced">SS</tt>表示通行状态，00表示成功，FF表示失败，<tt class="remarkup-monospaced">LL</tt>表示读头ID的长度，<tt class="remarkup-monospaced">xxxx</tt>表示读头ID</p></div></div></div></div></div><div class="phui-document-view-pro-box"><div class="phui-property-list-view "><div class="phui-property-list-section"><div class="phui-property-list-container grouped"><div class="phui-property-list-properties-wrap "><dl class="phui-property-list-properties"><dt class="phui-property-list-key">Last Author </dt><dd class="phui-property-list-value"><a href="https://dev.fayfans.com/p/dangfan/" class="phui-handle phui-link-person">dangfan</a> </dd><dt class="phui-property-list-key">Projects </dt><dd class="phui-property-list-value"><em>None</em> </dd><dt class="phui-property-list-key">Subscribers </dt><dd class="phui-property-list-value"><em>None</em> </dd></dl></div></div></div></div></div><div class="phui-document-view-pro-box"><div class="phui-box phui-box-border phui-object-box mlt mll mlr "><div class="phui-header-shell "><h1 class="phui-header-view"><div class="phui-header-row"><div class="phui-header-col2"><span class="phui-header-header">Document Hierarchy</span></div><div class="phui-header-col3"></div></div></h1></div><div class="phabricator-remarkup mlt mlb"><ul class="remarkup-list"><li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/ideapod/">ideaPod</a></li><li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/%E5%8F%8C%E5%88%9B%E8%A1%97/">双创街</a></li><li class="remarkup-list-item"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/%E9%80%9A%E6%83%A0%E6%B2%B3/">通惠河</a></li></ul></div></div></div></div></div><div id="conpherence-durable-column" class="conpherence-durable-column loading " style="display: none;" data-sigil="conpherence-durable-column"><div class="conpherence-durable-column-header grouped" data-sigil="conpherence-minimize-window"><div class="conpherence-durable-column-header-inner"><div class="aphlict-connection-status " id="UQ0_82"><span class="connection-status-text aphlict-connection-status-notenabled"><span class="visual-only phui-icon-view phui-font-fa fa-circle-o grey" data-meta="0_31" aria-hidden="true"></span>Notification server not enabled</span></div><div class="conpherence-durable-column-header-text" data-sigil="conpherence-durable-column-header-text"><span>Conpherence</span></div><ul class="phui-list-view phabricator-application-menu"><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon core-menu-item conpherence-settings-icon" id="UQ0_80" data-sigil="conpherence-settings-menu" data-autoid="autoid_4"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" class="phui-list-item-href"><span class="aural-only">Room Actions</span><span class="visual-only phui-icon-view phui-font-fa fa-gear phui-list-item-icon" data-meta="0_32" aria-hidden="true"></span><span class="phui-list-item-name visual-only">Room Actions</span></a></li><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon core-menu-item conpherence-minimize-icon" data-sigil="conpherence-minimize-window"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" class="phui-list-item-href"><span class="aural-only">Minimize Window</span><span class="visual-only phui-icon-view phui-font-fa fa-toggle-down phui-list-item-icon" data-meta="0_33" aria-hidden="true"></span><span class="phui-list-item-name visual-only">Minimize Window</span></a></li></ul><div id="UQ0_81" class="phabricator-main-menu-dropdown phui-list-sidenav conpherence-settings-dropdown" sigil="phabricator-notification-menu" style="display: none"><ul class="phui-list-view "><li class="phui-list-item-view phui-list-item-type-link phui-list-item-has-icon " data-meta="0_30" data-sigil="conpherence-durable-column-header-action"><a href="https://dev.fayfans.com/w/%E7%BE%BD%E9%A3%9E%E9%97%A8/#" class="phui-list-item-href"><span class="visual-only phui-icon-view phui-font-fa fa-times phui-list-item-icon" data-meta="0_29" aria-hidden="true"></span><span class="phui-list-item-name">Hide Window</span></a></li></ul></div></div></div><div class="conpherence-durable-column-body" data-sigil="conpherence-durable-column-body"><div class="conpherence-durable-column-icon-bar"></div><div class="conpherence-durable-column-main jx-scrollbar-frame" data-sigil="conpherence-durable-column-main" data-autoid="autoid_10"><div class="jx-scrollbar-bar" data-autoid="autoid_12" style="display: none;"><div class="jx-scrollbar-handle" data-autoid="autoid_11"></div></div><div class="jx-scrollbar-viewport" data-autoid="autoid_13" style="width: 17px; height: 0px;"><div class="jx-scrollbar-content"><div id="conpherence-durable-column-content" class="conpherence-durable-column-frame"><div class="conpherence-durable-column-transactions" data-sigil="conpherence-durable-column-transactions">Loading...</div></div></div></div></div></div></div></div><script type="text/javascript" src="./⚡ 羽飞门_files/core.pkg.js.下载"></script><script type="text/javascript">JX.Stratcom.mergeData(0, [{"map":{"UQ0_0":"phui-document-toc-open"}},[],[],[],[],[],[],[],[],[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_2\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/phriction\/edit\/37\/\" class=\"phabricator-action-view-item\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-pencil phabricator-action-view-icon\" data-meta=\"0_2\" aria-hidden=\"true\"\u003e\u003c\/span\u003eEdit Document\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_4\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/phriction\/move\/37\/\" class=\"phabricator-action-view-item\" data-sigil=\"workflow\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-arrows phabricator-action-view-icon\" data-meta=\"0_3\" aria-hidden=\"true\"\u003e\u003c\/span\u003eMove Document\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_6\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/phriction\/delete\/37\/\" class=\"phabricator-action-view-item\" data-sigil=\"workflow\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-times phabricator-action-view-icon\" data-meta=\"0_4\" aria-hidden=\"true\"\u003e\u003c\/span\u003eDelete Document\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_8\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/phriction\/history\/%E7%BE%BD%E9%A3%9E%E9%97%A8\/\" class=\"phabricator-action-view-item\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-list phabricator-action-view-icon\" data-meta=\"0_5\" aria-hidden=\"true\"\u003e\u003c\/span\u003eView History\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_10\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/w\/%E7%BE%BD%E9%A3%9E%E9%97%A8\/?__print__=1\" class=\"phabricator-action-view-item\" target=\"_blank\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-print phabricator-action-view-icon\" data-meta=\"0_6\" aria-hidden=\"true\"\u003e\u003c\/span\u003ePrintable Page\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_12\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003cform action=\"\/subscriptions\/add\/PHID-WIKI-4tzhvvxyrx2kcsyzskkj\/\" method=\"POST\" data-sigil=\"workflow\"\u003e\u003cinput type=\"hidden\" name=\"__csrf__\" value=\"B@ltnkjhrk2438b2870ac1b516\" \/\u003e\u003cinput type=\"hidden\" name=\"__form__\" value=\"1\" \/\u003e\u003cbutton class=\"phabricator-action-view-item\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-plus-circle phabricator-action-view-icon\" data-meta=\"0_7\" aria-hidden=\"true\"\u003e\u003c\/span\u003eSubscribe\u003c\/button\u003e\u003c\/form\u003e\u003c\/li\u003e\u003cli id=\"UQ0_14\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/token\/give\/PHID-WIKI-4tzhvvxyrx2kcsyzskkj\/\" class=\"phabricator-action-view-item\" data-sigil=\"workflow\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-trophy phabricator-action-view-icon\" data-meta=\"0_8\" aria-hidden=\"true\"\u003e\u003c\/span\u003eAward Token\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_16\" class=\"phabricator-action-view phabricator-action-view-href action-has-icon\" style=\"\"\u003e\u003ca href=\"\/flag\/edit\/PHID-WIKI-4tzhvvxyrx2kcsyzskkj\/\" class=\"phabricator-action-view-item\" data-sigil=\"workflow\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-flag phabricator-action-view-icon\" data-meta=\"0_9\" aria-hidden=\"true\"\u003e\u003c\/span\u003eFlag For Later\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],[],[],[],[],{"map":{"UQ0_18":"phabricator-search-menu-expanded","UQ0_41":"menu-icon-selected"}},{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_26\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/w\/create\/\" class=\"phabricator-action-view-item\"\u003eNew Document\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_28\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/w\/\/phriction\/\" class=\"phabricator-action-view-item\"\u003eIndex\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_30\" class=\"phabricator-action-view phabricator-action-view-type-label\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003eQueries\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_32\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/phriction\/query\/active\/\" class=\"phabricator-action-view-item\"\u003eActive\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_34\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/phriction\/query\/all\/\" class=\"phabricator-action-view-item\"\u003eAll\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_36\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/phriction\/query\/edit\/\" class=\"phabricator-action-view-item\"\u003eEdit Queries...\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_38\" class=\"phabricator-action-view phabricator-action-view-type-label\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003eSearch\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_40\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/phriction\/query\/advanced\/\" class=\"phabricator-action-view-item\"\u003eAdvanced Search\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],{"items":[{"name":"Search"},{"icon":"fa-globe","name":"All Documents","value":"all"},{"icon":"fa-book","name":"Current Application","value":"application"},{"name":"Saved Queries"},{"icon":"fa-certificate","name":"Open Documents","value":"open"},{"icon":"fa-certificate","name":"Open Tasks","value":"open-tasks"},{"name":"More Options"},{"icon":"fa-search-plus","name":"Advanced Search","href":"\/search\/query\/advanced\/"},{"icon":"fa-book","name":"User Guide: Search","href":"https:\/\/secure.phabricator.com\/diviner\/find\/?name=Search+User+Guide&type=article&jump=1"}],"icon":"fa-globe","value":"all"},[],[],{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_44\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/maniphest\/task\/edit\/form\/1\/\" class=\"phabricator-action-view-item\"\u003eCreate Task\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_46\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/project\/edit\/form\/default\/\" class=\"phabricator-action-view-item\"\u003eCreate Project\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_48\" class=\"phabricator-action-view phabricator-action-view-href phabricator-action-view-type-link\" style=\"\"\u003e\u003ca href=\"\/diffusion\/edit\/form\/default\/\" class=\"phabricator-action-view-item\"\u003eCreate Repository\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_50\" class=\"phabricator-action-view phabricator-action-view-type-divider\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_52\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"\/favorites\/menu\/configure\/\" class=\"phabricator-action-view-item\"\u003eEdit Favorites\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},[],[],[],[],[],[],[],{"action":"hide_column"},[],[],[]]);
JX.onload(function(){JX.initBehaviors({"refresh-csrf":[{"tokenName":"__csrf__","header":"X-Phabricator-Csrf","viaHeader":"X-Phabricator-Via","current":"B@ltnkjhrk2438b2870ac1b516"}],"history-install":[]})});
JX.onload(function(){JX.initBehaviors({"phabricator-reveal-content":[],"phui-dropdown-menu":[],"workflow":[],"detect-timezone":[{"offset":-480,"uri":"\/settings\/timezone\/","message":"Your browser timezone setting differs from the timezone setting in your profile, click to reconcile.","ignoreKey":"time.offset.ignore","ignore":null}],"lightbox-attachments":[{"lightbox_id":"UQ0_17","downloadForm":"\u003cform action=\"#\" method=\"POST\" class=\"lightbox-download-form\" id=\"lightbox-download-form\" data-sigil=\"download lightbox-download-submit\"\u003e\u003cinput type=\"hidden\" name=\"__csrf__\" value=\"B@ltnkjhrk2438b2870ac1b516\" \/\u003e\u003cinput type=\"hidden\" name=\"__form__\" value=\"1\" \/\u003e\u003ca class=\"lightbox-download phui-icon-circle hover-green\" href=\"#\"\u003e\u003cspan class=\"visual-only phui-icon-view phui-font-fa fa-download phui-icon-circle-icon\" data-meta=\"0_15\" aria-hidden=\"true\"\u003e\u003c\/span\u003e\u003c\/a\u003e\u003c\/form\u003e"}],"aphront-form-disable-on-submit":[],"toggle-class":[],"phabricator-gesture":[],"device":[],"high-security-warning":[{"show":false,"uri":"\/auth\/session\/downgrade\/","message":"Your session is in high security mode. When you finish using it, click here to leave."}],"aphlict-dropdown":[{"bubbleID":"UQ0_19","countID":"UQ0_20","dropdownID":"UQ0_21","loadingText":"Loading...","uri":"\/conpherence\/panel\/","countType":"messages","countNumber":0,"unreadClass":"message-unread","favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/cdb11121\/rsrc\/favicons\/favicon.ico","message_favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/115bc010\/rsrc\/favicons\/favicon-message.ico","mention_favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/1fdd0fa4\/rsrc\/favicons\/favicon-mention.ico"},{"bubbleID":"UQ0_24","countID":"UQ0_22","dropdownID":"UQ0_23","loadingText":"Loading...","uri":"\/notification\/panel\/","countType":"notifications","countNumber":0,"unreadClass":"alert-unread","favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/cdb11121\/rsrc\/favicons\/favicon.ico","message_favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/115bc010\/rsrc\/favicons\/favicon-message.ico","mention_favicon":"https:\/\/dev.fayfans.com\/res\/phabricator\/1fdd0fa4\/rsrc\/favicons\/favicon-mention.ico"},{"bubbleID":"UQ0_80","dropdownID":"UQ0_81","local":true,"containerDivID":"conpherence-durable-column"}],"phabricator-keyboard-shortcuts":[{"helpURI":"\/help\/keyboardshortcut\/","searchID":"UQ0_42","pht":{"\/":"Give keyboard focus to the search box.","?":"Show keyboard shortcut help for the current page."}}],"user-menu":[{"menuID":"UQ0_53","menu":{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_55\" class=\"phabricator-action-view\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003e\u003cul class=\"phui-oi-list-view phui-oi-list-flush phui-oi-list-simple phabricator-core-user-profile-object\"\u003e\u003cli class=\"phui-oi phui-oi-no-bar phui-oi-with-image phui-oi-standard\"\u003e\u003cdiv class=\"phui-oi-frame\"\u003e\u003cdiv class=\"phui-oi-frame-content\"\u003e\u003cdiv class=\"phui-oi-image\" style=\"background-image: url(https:\/\/dev.fayfans.com\/file\/data\/gk7aafimjs7dky3vzczn\/PHID-FILE-oxyzbll3okylpwll5gfv\/profile)\"\u003e\u003c\/div\u003e\u003cdiv class=\"phui-oi-content-box\"\u003e\u003cdiv class=\"phui-oi-table\"\u003e\u003cdiv class=\"phui-oi-table-row\"\u003e\u003cdiv class=\"phui-oi-col1\"\u003e\u003cdiv class=\"phui-oi-name\"\u003e\u003cspan data-sigil=\"slippery\"\u003e\u003cspan class=\"phui-oi-objname\"\u003e\u90a2\u6d25\u003c\/span\u003e \u003cdiv class=\"phui-oi-link\"\u003e\u003c\/div\u003e\u003c\/span\u003e\u003c\/div\u003e\u003cdiv class=\"phui-oi-content\"\u003e\u003cdiv class=\"phui-oi-subhead\"\u003exingjin\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/div\u003e\u003c\/li\u003e\u003c\/ul\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_57\" class=\"phabricator-action-view phabricator-action-view-type-divider\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\"\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_59\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"\/p\/xingjin\/\" class=\"phabricator-action-view-item\"\u003eProfile\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_61\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"\/settings\/user\/xingjin\/\" class=\"phabricator-action-view-item\"\u003eSettings\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_63\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"\/people\/manage\/15\/\" class=\"phabricator-action-view-item\"\u003eManage\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_65\" class=\"phabricator-action-view phabricator-action-view-type-divider\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\" data-sigil=\"help-item\"\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_67\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"https:\/\/secure.phabricator.com\/diviner\/find\/?name=Phriction+User+Guide&amp;type=article&amp;jump=1\" class=\"phabricator-action-view-item\" target=\"_blank\" data-sigil=\"help-item\" rel=\"noreferrer\"\u003ePhriction User Guide\u003c\/a\u003e\u003c\/li\u003e\u003cli id=\"UQ0_69\" class=\"phabricator-action-view phabricator-action-view-type-divider\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\" data-sigil=\"logout-item\"\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_71\" class=\"phabricator-action-view phabricator-action-view-href action-item-red\" style=\"\"\u003e\u003ca href=\"\/logout\/\" class=\"phabricator-action-view-item\" data-sigil=\"workflow logout-item\"\u003eLog Out xingjin\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"}}],"phabricator-search-typeahead":[{"id":"UQ0_72","input":"UQ0_42","button":"UQ0_73","selectorID":"UQ0_74","applicationID":"UQ0_75","defaultApplicationIcon":"fa-dot-circle-o","appScope":"application","src":"\/typeahead\/class\/PhabricatorSearchDatasource\/","limit":10,"placeholder":"Search","scopeUpdateURI":"\/settings\/adjust\/?key=search-scope"}],"quicksand-blacklist":[{"patterns":["\/phame\/live\/.*","\/conpherence\/.*","\/Z\\d+","\/file\/data\/.*"]}],"durable-column":[{"visible":false,"minimize":false,"visibleURI":"\/settings\/adjust\/?key=conpherence-column","minimizeURI":"\/settings\/adjust\/?key=conpherence-minimize-column","quicksandConfig":{"title":"\u26a1 \u7fbd\u98de\u95e8","bodyClasses":"device-desktop platform-windows phui-theme-blindigo","aphlictDropdownData":[{"isInstalled":true,"countType":"notifications","count":0,"rawCount":0},{"isInstalled":true,"countType":"messages","count":0,"rawCount":0}],"globalDragAndDrop":false,"hisecWarningConfig":{"show":false,"uri":"\/auth\/session\/downgrade\/","message":"Your session is in high security mode. When you finish using it, click here to leave."},"consoleConfig":null,"applicationClass":"PhabricatorPhrictionApplication","applicationSearchIcon":"fa-book","helpItems":{"items":"\u003cul class=\"phabricator-action-list-view \"\u003e\u003cli id=\"UQ0_77\" class=\"phabricator-action-view phabricator-action-view-type-divider\" style=\"\"\u003e\u003cspan class=\"phabricator-action-view-item\" data-sigil=\"help-item\"\u003e\u003c\/span\u003e\u003c\/li\u003e\u003cli id=\"UQ0_79\" class=\"phabricator-action-view phabricator-action-view-href\" style=\"\"\u003e\u003ca href=\"https:\/\/secure.phabricator.com\/diviner\/find\/?name=Phriction+User+Guide&amp;type=article&amp;jump=1\" class=\"phabricator-action-view-item\" target=\"_blank\" data-sigil=\"help-item\" rel=\"noreferrer\"\u003ePhriction User Guide\u003c\/a\u003e\u003c\/li\u003e\u003c\/ul\u003e"},"pageObjects":{"PHID-WIKI-4tzhvvxyrx2kcsyzskkj":true},"subscriptions":["PHID-WIKI-4tzhvvxyrx2kcsyzskkj","PHID-USER-6e5qy7hdntabhoub2o6l"]}}],"aphlict-status":[{"nodeID":"UQ0_82","pht":{"setup":"Setting Up Client","open":"Connected","closed":"Disconnected"},"icon":{"open":{"icon":"fa-circle","color":"green"},"setup":{"icon":"fa-circle","color":"yellow"},"closed":{"icon":"fa-circle","color":"red"}}}]})});</script></body></html>>